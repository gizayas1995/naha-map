<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Naha Map</title>
  <style>
    body, html { margin: 0; padding: 0; height: 100%; }
    #map { height: 100%; }
    .character-select {
      position: absolute; top: 10px; left: 10px; z-index: 1000;
    }
    .character-select img {
      width: 40px; cursor: pointer; margin: 4px;
      border: 2px solid transparent;
    }
    .character-select img.selected {
      border-color: red;
    }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
  <div class="character-select">
    <img src="img/robo_front_still.png" id="robo" class="selected" />
    <img src="img/turtle_front_still.png" id="turtle" />
    <img src="img/bird_front_still.png" id="bird" />
  </div>
  <div id="map"></div>
  <script>
    const characterImgs = {
      robo: "img/robo_front_still.png",
      turtle: "img/turtle_front_still.png",
      bird: "img/bird_front_still.png"
    };

    let selectedCharacter = 'robo';

    document.querySelectorAll('.character-select img').forEach(img => {
      img.addEventListener('click', () => {
        document.querySelectorAll('.character-select img').forEach(i => i.classList.remove('selected'));
        img.classList.add('selected');
        selectedCharacter = img.id;
      });
    });

    const map = L.map('map').setView([26.2124, 127.6792], 17);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    const marker = L.marker([26.2124, 127.6792]).addTo(map);
    marker.on('click', () => {
      const icon = L.icon({
        iconUrl: characterImgs[selectedCharacter],
        iconSize: [96, 96],
        iconAnchor: [48, 48]
      });
      L.marker(marker.getLatLng(), { icon }).addTo(map);
    });
  </script>
</body>
</html>
